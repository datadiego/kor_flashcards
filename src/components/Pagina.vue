<template>
    <div>
        <h1>ðŸ¥¬ Kimchi Cards ðŸ¥¬</h1>
        <Selector @leccion-cambiada="actualizarLeccion" />
        <div v-if="leccion_cargada">
            <h2 v-if="tipo_ronda_actual=='caracter_significado'">{{preguntas[0].caracter}}</h2>
            <h2 v-else>{{preguntas[0].significado}}</h2>
        </div>
        <h2 v-else>Selecciona una lecciÃ³n para empezar</h2>
        <Opciones :opciones_ronda="preguntas" :tipo_ronda="tipo_ronda_actual"/>
    </div>
</template>

<script>
import Selector from './Selector.vue'
import Opciones from './Opciones.vue'

import leccion1 from '../assets/coreano1.csv'
import leccion2 from '../assets/coreano2.csv'

export default {
    name: 'Pagina',
    data(){
        return{
            leccion_actual: "1",
            preguntas: [],
            pregunta_actual: null,
            leccion_cargada: false,
            tipos_ronda: ['caracter_significado','significado_caracter'],
            tipo_ronda_actual: null,
            
        }
    },
    methods:{
        actualizarLeccion(nuevaLeccion){
            this.leccion_actual = nuevaLeccion
            this.getLeccion()
        },
        getLeccion(){
            console.log(this.leccion_actual)
            if(this.leccion_actual == '1'){
                console.log("Cargando csv")
                //almacenar en preguntas las 4 primeras palabras
                this.preguntas = leccion1.slice(0,4)
                this.leccion_cargada = true
            }
            else if(this.leccion_actual == '2'){
                console.log("Cargando csv")
                //almacenar en preguntas las 4 primeras palabras
                this.preguntas = leccion2.slice(0,4)
                console.log(this.preguntas)
            }
            else{
                console.log("No hay leccion")
            }
    }
},
    components: {
        Selector,
        Opciones
    },
    beforeMount(){
        const randint = Math.floor(Math.random() * this.tipos_ronda.length)
        this.tipo_ronda_actual = this.tipos_ronda[randint]
        console.log(this.tipo_ronda_actual)
    }
    
}
</script>

<style>

</style>